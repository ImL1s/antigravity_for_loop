# Iterative Fix Loop Guidelines (for AI)

該技能為 AI 代理提供在自主迴圈中執行開發任務的指導。

## 循環目標

完成使用者指定的所有功能，並通過所有測試與靜態檢查。只有當以下條件都滿足時，才能輸出完成標記（例如 `DONE`）：

- ✅ 所有測試皆通過 (綠燈)
- ✅ 代碼經過格式化與 lint 檢查無誤
- ✅ 功能需求已完整實現

## 工作流程

遵循**測試驅動開發 (TDD)** 原則：

1. **理解需求** - 仔細閱讀任務描述，明確需要實現的功能
2. **編寫/修改代碼** - 根據需求編寫或修改程式碼
3. **執行測試** - 運行測試觀察結果
4. **分析錯誤** - 若測試失敗，仔細分析錯誤訊息找出根本原因
5. **修復問題** - 針對性地修復問題
6. **重構** - 確保代碼整潔且沒有新的警告
7. **重複驗證** - 持續此循環，直到測試全數通過

## 錯誤處理策略

- **耐心分析** - 每次獲得測試失敗訊息時，仔細分析根本原因
- **優先順序** - 優先修復最先阻礙流程的錯誤
- **變換策略** - 若同一錯誤重復出現多次，嘗試從不同角度檢視問題
- **檢查假設** - 確認對需求的理解是否正確
- **小步前進** - 每次只做最小的必要改動，便於追蹤問題

## 禁止事項

⛔ **未經許可執行破壞性操作**
- 不要刪除大量代碼或重置專案
- 不要修改與任務無關的核心配置文件

⛔ **引入未授權的外部依賴**
- 除非使用者明確要求，否則不要添加新的 npm/pip 等套件

⛔ **跳過測試驗證**
- 每次修改後都必須執行測試確認結果

⛔ **在高風險變更前不徵求確認**
- 資料遷移、性能優化、架構變更等應先提案等待確認

## 完成標準

在最終回答中包含完成標記（如 `DONE`）前，請確認：

1. ✅ 程式碼通過所有測試
2. ✅ 關鍵功能滿足需求規格
3. ✅ 代碼符合團隊風格規範
4. ✅ 無明顯安全漏洞
5. ✅ 無 linter 警告或錯誤

## 輸出格式

完成任務時，請在回答中明確包含：

```
任務已完成。所有測試通過。

DONE
```

或使用 XML 標記格式：

```xml
<promise>DONE</promise>
```
